---

- name: Checkout ansible source repository
  ansible.builtin.git:
    repo: "{{ ansible_setup_git_repository }}"
    dest: "{{ ansible_setup_workdir }}"
    update: true
  become: false

- name: Set Git remote origin
  community.general.git_config:
    name: remote.origin.url
    scope: global
    value: "{{ ansible_setup_git_repository }}"
    repo: "{{ ansible_setup_workdir }}"
    state: present
  become: false

- name: Set ansible working directory as safe
  community.general.git_config:
    name: safe.directory
    scope: global
    value: "{{ ansible_setup_workdir }}"
    state: present
  become: false
