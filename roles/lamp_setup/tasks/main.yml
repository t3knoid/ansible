---
- name: Unhold package versions
  ansible.builtin.dpkg_selections:
    name: "{{ item.split('=')[0] }}"
    selection: install
  loop: "{{ lamp_setup_packages }}"

- name: Install lamp packages
  ansible.builtin.apt:
    name: "{{ lamp_setup_packages }}"
    state: present
    update_cache: true

- name: Hold package versions
  ansible.builtin.dpkg_selections:
    name: "{{ item.split('=')[0] }}"
    selection: hold
  loop: "{{ lamp_setup_packages }}"
