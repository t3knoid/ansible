---

- name: Add deadsnakes PPA repository
  ansible.builtin.apt_repository:
    repo: ppa:deadsnakes/ppa

- name: Update apt cache
  ansible.builtin.apt:
    update_cache: true

- name: Install Python packages
  ansible.builtin.apt:
    name: "{{ item }}"
    state: present
  loop: "{{ python3_packages_to_install }}"

- name: Create a directory for the virtual environment
  ansible.builtin.file:
    path: "/opt/python_{{ python3_version }}"
    state: directory
    mode: "0774"
    group: "ansible"
